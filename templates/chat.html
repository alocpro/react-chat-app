{% extends 'base.html' %}

{% block js %}
    <script type="text/javascript" src="socket.io/socket.io.js"></script>
    <script type="text/javascript" src="media/js/models.js"></script>
    <script type="text/javascript" src="media/js/views.js"></script>
    <script type="text/javascript" src="media/js/client.js"></script>
    <script type="text/javascript">
        window.client = new window.LCB.Client();
        $(function() {
           window.client.start();
        });
    </script>
{% endblock %}

{% block attributes %}
    ng-app="lets-chat"
{% endblock %}

{% block body %}
    <div id="lcb-client" class="lcb-client" ng-controller="client-controller">
        <header class="lcb-header"></header>
        <section class="lcb-main">
            <section class="lcb-sidebar">
                    <div class="lcb-rooms-browser">
                        <h2>Rooms</h2>
                        <ul class="lcb-rooms-list">
                            <li rv-each-room="list:rooms" rv-id="room.id">
                                ({ room:_id }) { room:name } &middot; { room:description }
                            </li>
                        </ul>
                    </div>
                    <form ng-submit="createRoom()">
                        <input ng-model="forms.room.name" type="text" name="name" placeholder="Name" />
                        <input ng-model="forms.room.description" type="text" name="description" placeholder="Description" />
                        <button type="submit">Create</button>
                    </form>
                    <h2>Account Info</h2>
                    <table>
                        <tbody>
                            {% for property, value in account %}
                                <tr>
                                    <td>{{ property }}</td>
                                    <td>{{ value }}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
            </section><!-- lcb-sidebar end -->
            <section class="lcb-subsidebar">
                <div class="lcb-room-meta">
                    <h2 class="lcb-room-heading">Development</h2>
                    <div class="lcb-room-description">
                        <p>| (• ◡•) | (❍ᴥ❍ʋ) Build 2.27 on Tokyo soon.</p>
                    </div>
                </div>
                <div class="lcb-room-actions btn-groups">
                    <button class="btn btn-default"><i class="fa fa-cloud"></i></button>
                    <button class="btn btn-default"><i class="fa fa-cloud"></i></button>
                    <button class="btn btn-default"><i class="fa fa-cloud"></i></button>
                </div>
                <div class="lcb-item-list">
                    <h3 class="lcb-item-list-heading">Users</h3>
                    <ul>
                        <li ng-repeat="user in users">
                            <img class="lcb-item-list-avatar" src="https://www.gravatar.com/avatar/{$ user.avatar $}?s=50" />
                            <div class="lcb-item-list-meta">
                                  {$ user.name $}
                            </div>
                        </li>
                    </ul>
                </div>
            </section><!-- lcb-subsidebar end -->
            <section class="lcb-chat">
                <ul class="lcb-messages">
                    <li class="lcb-message" ng-repeat="message in messages">
                        <img class="lcb-message-avatar" src="https://www.gravatar.com/avatar/{$ message.owner.avatar $}?s=50" />
                        <div class="meta">
                            <span class="lcb-message-name">{$ message.owner.name $}</span>
                            <time class="lcb-message-time">{$ message.time $}</time>
                            <ul class="lcb-message-fragments">
                                <li class="lcb-message-fragment">{$ message.text $}</li>
                            </ul>
                        </div>
                    </li>
                </ul>
                <form class="lcb-entry" ng-submit="sendMessage()">
                    <textarea class="lcb-entry-input" ng-model="forms.message.text" placeholder="Wow. Much talk." ng-keyup="$event.keyCode == 13 && send($event)"></textarea>
                    <button type="submit" class="btn btn-info lcb-entry-button" data-click="send()">Send</button>
                </form>
            </section><!-- lcb-chat end -->
        </section><!-- lcb-main end -->
    </div><!-- lcb-client end -->
{% endblock %}